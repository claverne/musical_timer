[{"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/index.js":"1","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/App.js":"2","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/styles/theme.js":"3","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/back.js":"4","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Home.js":"5","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Loggedin.js":"6","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/util.js":"7","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/User.js":"8","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Navbar.js":"9","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/NumberInputFieldTimer.js":"10","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/TimerInput.js":"11","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Layout.js":"12","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/ListStyle.js":"13","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/RadioCard.js":"14"},{"size":365,"mtime":1612122821138,"results":"15","hashOfConfig":"16"},{"size":513,"mtime":1612094939100,"results":"17","hashOfConfig":"16"},{"size":181,"mtime":1612129913001,"results":"18","hashOfConfig":"16"},{"size":6704,"mtime":1615581089965,"results":"19","hashOfConfig":"16"},{"size":356,"mtime":1615829184404,"results":"20","hashOfConfig":"16"},{"size":2814,"mtime":1615829419010,"results":"21","hashOfConfig":"16"},{"size":214,"mtime":1615572372246,"results":"22","hashOfConfig":"16"},{"size":241,"mtime":1612118223116,"results":"23","hashOfConfig":"16"},{"size":1335,"mtime":1615831329637,"results":"24","hashOfConfig":"16"},{"size":462,"mtime":1615829041553,"results":"25","hashOfConfig":"16"},{"size":2024,"mtime":1615586649666,"results":"26","hashOfConfig":"16"},{"size":776,"mtime":1615830730001,"results":"27","hashOfConfig":"16"},{"size":1359,"mtime":1615838726330,"results":"28","hashOfConfig":"16"},{"size":1303,"mtime":1615838115117,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"o61has",{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"32"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"42","messages":"43","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"56","messages":"57","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/index.js",[],["60","61"],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/App.js",[],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/styles/theme.js",[],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/back.js",["62","63"],"import {User} from './User.js'\nimport {shuffle} from './util.js'\n\nlet axios = require('axios');\nlet querystring = require('querystring');\nlet Cookie = require('js-cookie');\nconst imageToBase64 = require('image-to-base64');\n\nlet access_token = null;\nlet refresh_token = null\nlet user_id = null;\nlet user_country = null;\n\nexport function init_token() {\n    access_token = Cookie.get('access_token');\n    refresh_token = Cookie.get('refresh_token');\n}\n\nexport function getUser() {\n    return axios({\n        method: 'get',\n        url: 'https://api.spotify.com/v1/me',\n        headers: {\n          'Authorization': 'Bearer ' + access_token\n        },\n    }).then(function(response) {\n        user_id = response.data.id;\n        user_country = response.data.country;\n        return new User(response.data.id, response.data.display_name, response.data.images);\n    });\n}\n\nexport function login() {\n    axios({\n        method: 'get',\n        url: 'http://localhost:8888/login',\n        headers: {\n            'Access-Control-Allow-Credentials': true,\n            'Access-Control-Allow-Origins': 'http://localhost:8888',\n            'Access-Control-Allow-Headers': 'Accept',\n        },\n    }).then(function(response){\n        window.location.replace(response.data.urlbase +\n            querystring.stringify({\n                response_type: response.data.response_type,\n                client_id: response.data.client_id,\n                scope: response.data.scope,\n                redirect_uri: response.data.redirect_uri,\n                state: response.data.state,\n            })\n        )\n    });\n}\n\nasync function getMyPlaylistId() {\n    const playlist_name = \"⏱ My amazing timer !! ⏱️\";\n\n    const myPlaylists = await axios({\n        method:'get',\n        url:`https://api.spotify.com/v1/users/${user_id}/playlists`,\n        headers: {\n            'Authorization': 'Bearer ' + access_token,\n            'Content-Type': 'application/json',\n        },\n    });\n\n    const myPlaylist = myPlaylists.data.items.find(playlist => playlist.name === playlist_name);\n    if (myPlaylist) {\n        await axios({\n            method:'delete',\n            url:`https://api.spotify.com/v1/playlists/${myPlaylist.id}/followers`,\n            headers: {\n                'Authorization': 'Bearer ' + access_token,\n                'Content-Type': 'application/json',\n            },\n        });\n    }\n\n    const myNewPlaylist = await axios({\n        method:'post',\n        url:`https://api.spotify.com/v1/users/${user_id}/playlists`,\n        headers: {\n            'Authorization': 'Bearer ' + access_token,\n            'Content-Type': 'application/json',\n        },\n        data: {\n            name: playlist_name,\n        },\n    });\n\n    let imgBase64 = await fetch(\"http://localhost:3000/img.jpeg\") // Image URL\n    .then(a => a.blob())\n    .then(blob => new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onerror = reject;\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n    }));\n\n    imgBase64 = imgBase64.replace(\"data:image/jpeg;base64,\", \"\");\n\n    await axios({\n        method:'put',\n        url:`https://api.spotify.com/v1/playlists/${myNewPlaylist.data.id}/images`,\n        headers: {\n            'Authorization': 'Bearer ' + access_token,\n            'Content-Type': 'image/jpeg',\n        },\n        data: imgBase64,\n    });\n\n    return myNewPlaylist.data.id\n}\n\nfunction fillPlaylist(playlist_id, playlist_tracks) {\n    const listURIs = playlist_tracks.reduce((acc, cur) => acc + cur.uri.toString() + ',', '').slice(0, -1);\n    //console.log(listURIs);\n\n    axios({\n        method:'post',\n        url:`https://api.spotify.com/v1/playlists/${playlist_id}/tracks?uris=${listURIs}`,\n        headers: {\n            'Authorization': 'Bearer ' + access_token,\n            'Content-Type': 'application/json',\n        },\n    });\n}\n\nfunction getFeaturedPlaylistsIds() {\n    let date = new Date();\n    date = date.toISOString();\n\n    return axios({\n        method:'get',\n        url:`https://api.spotify.com/v1/browse/featured-playlists`,\n        headers: {\n            'Authorization': 'Bearer ' + access_token\n        },\n        params: {\n            country: user_country,\n            locale: \"en_US\",\n            timestamp: date,\n        },\n    }).then(function(response){\n        return response.data.playlists.items.map(function (playlist) {\n          return playlist.id\n        });\n    });\n}\n\nfunction getTracksInfo(playlist_id) {\n    let date = new Date();\n    date = date.toISOString();\n\n    return axios({\n        method:'get',\n        url:`https://api.spotify.com/v1/playlists/${playlist_id}/tracks`,\n        headers: {\n            'Authorization': 'Bearer ' + access_token\n        },\n        params: {\n            market: user_country,\n            fields: \"items(track(uri, duration_ms))\",\n            timestamp: date,\n        },\n    }).then(function(response) {\n        const tracks = response.data.items;\n         return tracks.filter(trackObj => trackObj.track).map(function(trackObj) {\n             return {uri: trackObj.track.uri, duration_s: Math.round(trackObj.track.duration_ms/1000)};\n         });\n    });\n}\n\nfunction filterTracks(allTracksInfo, max_dur) {\n    let tot_dur = 0;\n    let playlist_tracks = [];\n\n    allTracksInfo = shuffle(allTracksInfo);\n\n    allTracksInfo.forEach((trackInfo) => {\n        if(trackInfo.duration_s <= max_dur - tot_dur - 150 - 3) {\n            tot_dur = tot_dur + trackInfo.duration_s;\n            playlist_tracks = playlist_tracks.concat(trackInfo);\n        }\n    });\n\n    allTracksInfo = allTracksInfo.filter(item => !playlist_tracks.includes(item));\n\n    allTracksInfo.forEach((trackInfo) => {\n        if(trackInfo.duration_s === max_dur - tot_dur - 3) {\n            tot_dur = tot_dur + trackInfo.duration_s;\n            playlist_tracks = playlist_tracks.concat(trackInfo);\n        }\n    });\n\n    playlist_tracks = playlist_tracks.concat({uri:\"spotify:track:4J1UCLk38GysU2ZGpgQwCw\", duration_s:3});\n\n    console.log(tot_dur);\n\n    return playlist_tracks;\n}\n\nexport async function getTimerPlaylist(max_dur) {\n    const myPlaylist_id = await getMyPlaylistId();\n    //console.log(myPlaylist_id);\n    const featuredPlaylists_ids = await getFeaturedPlaylistsIds();\n    //console.log(featuredPlaylists_ids);\n\n    const PR_allTracksInfo = featuredPlaylists_ids.map((idPlaylist) => getTracksInfo(idPlaylist));\n    let allTracksInfo = await Promise.all(PR_allTracksInfo);\n    allTracksInfo = allTracksInfo.flat();\n    //console.log(allTracksInfo);\n\n    const playlist_tracks = filterTracks(allTracksInfo, max_dur);\n\n    fillPlaylist(myPlaylist_id, playlist_tracks);\n}","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Home.js",["64","65"],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Loggedin.js",["66","67","68","69","70","71","72"],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/util.js",[],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/User.js",[],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Navbar.js",[],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/NumberInputFieldTimer.js",[],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/TimerInput.js",[],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Layout.js",["73","74","75"],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/ListStyle.js",["76"],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/RadioCard.js",[],{"ruleId":"77","replacedBy":"78"},{"ruleId":"79","replacedBy":"80"},{"ruleId":"81","severity":1,"message":"82","line":7,"column":7,"nodeType":"83","messageId":"84","endLine":7,"endColumn":20},{"ruleId":"81","severity":1,"message":"85","line":16,"column":5,"nodeType":"83","messageId":"84","endLine":16,"endColumn":18},{"ruleId":"81","severity":1,"message":"86","line":4,"column":10,"nodeType":"83","messageId":"84","endLine":4,"endColumn":13},{"ruleId":"81","severity":1,"message":"87","line":4,"column":15,"nodeType":"83","messageId":"84","endLine":4,"endColumn":21},{"ruleId":"81","severity":1,"message":"86","line":2,"column":9,"nodeType":"83","messageId":"84","endLine":2,"endColumn":12},{"ruleId":"81","severity":1,"message":"87","line":2,"column":14,"nodeType":"83","messageId":"84","endLine":2,"endColumn":20},{"ruleId":"81","severity":1,"message":"88","line":2,"column":22,"nodeType":"83","messageId":"84","endLine":2,"endColumn":33},{"ruleId":"81","severity":1,"message":"89","line":2,"column":35,"nodeType":"83","messageId":"84","endLine":2,"endColumn":39},{"ruleId":"81","severity":1,"message":"90","line":2,"column":49,"nodeType":"83","messageId":"84","endLine":2,"endColumn":55},{"ruleId":"81","severity":1,"message":"91","line":3,"column":10,"nodeType":"83","messageId":"84","endLine":3,"endColumn":25},{"ruleId":"81","severity":1,"message":"92","line":6,"column":8,"nodeType":"83","messageId":"84","endLine":6,"endColumn":14},{"ruleId":"81","severity":1,"message":"93","line":3,"column":14,"nodeType":"83","messageId":"84","endLine":3,"endColumn":20},{"ruleId":"81","severity":1,"message":"94","line":3,"column":30,"nodeType":"83","messageId":"84","endLine":3,"endColumn":36},{"ruleId":"81","severity":1,"message":"95","line":4,"column":9,"nodeType":"83","messageId":"84","endLine":4,"endColumn":19},{"ruleId":"81","severity":1,"message":"87","line":2,"column":15,"nodeType":"83","messageId":"84","endLine":2,"endColumn":21},"no-native-reassign",["96"],"no-negated-in-lhs",["97"],"no-unused-vars","'imageToBase64' is assigned a value but never used.","Identifier","unusedVar","'refresh_token' is assigned a value but never used.","'Box' is defined but never used.","'Center' is defined but never used.","'NumberInput' is defined but never used.","'Text' is defined but never used.","'HStack' is defined but never used.","'FontAwesomeIcon' is defined but never used.","'Navbar' is defined but never used.","'Button' is defined but never used.","'VStack' is defined but never used.","'TimerInput' is defined but never used.","no-global-assign","no-unsafe-negation"]
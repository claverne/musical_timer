[{"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/index.js":"1","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/App.js":"2","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/styles/theme.js":"3","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/back.js":"4","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Home.js":"5","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Loggedin.js":"6","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/util.js":"7","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/User.js":"8","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Navbar.js":"9","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/NumberInputFieldTimer.js":"10","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/TimerInput.js":"11","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Layout.js":"12","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/RadioCard.js":"13","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/ListStyles.js":"14","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Summary.js":"15"},{"size":365,"mtime":1612122821138,"results":"16","hashOfConfig":"17"},{"size":513,"mtime":1612094939100,"results":"18","hashOfConfig":"17"},{"size":181,"mtime":1612129913001,"results":"19","hashOfConfig":"17"},{"size":8268,"mtime":1618868597663,"results":"20","hashOfConfig":"17"},{"size":599,"mtime":1618927401386,"results":"21","hashOfConfig":"17"},{"size":5083,"mtime":1618927416137,"results":"22","hashOfConfig":"17"},{"size":214,"mtime":1615572372246,"results":"23","hashOfConfig":"17"},{"size":241,"mtime":1612118223116,"results":"24","hashOfConfig":"17"},{"size":1410,"mtime":1618925151790,"results":"25","hashOfConfig":"17"},{"size":1054,"mtime":1618862579147,"results":"26","hashOfConfig":"17"},{"size":2188,"mtime":1618927013822,"results":"27","hashOfConfig":"17"},{"size":729,"mtime":1618927083892,"results":"28","hashOfConfig":"17"},{"size":1064,"mtime":1618925487801,"results":"29","hashOfConfig":"17"},{"size":1660,"mtime":1618925418951,"results":"30","hashOfConfig":"17"},{"size":1770,"mtime":1618925751025,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"o61has",{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"34"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"44","messages":"45","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"54","usedDeprecatedRules":"34"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/index.js",[],["65","66"],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/App.js",[],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/styles/theme.js",[],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/back.js",["67","68"],"import {User} from './User.js'\nimport {shuffle} from './util.js'\n\nlet axios = require('axios');\nlet querystring = require('querystring');\nlet Cookie = require('js-cookie');\nconst imageToBase64 = require('image-to-base64');\n\nlet access_token = null;\nlet refresh_token = null\nlet user_id = null;\nlet user_country = null;\n\nexport function init_token() {\n    access_token = Cookie.get('access_token');\n    refresh_token = Cookie.get('refresh_token');\n}\n\nexport function getUser() {\n    return axios({\n        method: 'get',\n        url: 'https://api.spotify.com/v1/me',\n        headers: {\n          'Authorization': 'Bearer ' + access_token\n        },\n    }).then(function(response) {\n        user_id = response.data.id;\n        user_country = response.data.country;\n        return new User(response.data.id, response.data.display_name, response.data.images);\n    });\n}\n\nexport function login() {\n    axios({\n        method: 'get',\n        url: 'http://localhost:8888/login',\n        headers: {\n            'Access-Control-Allow-Credentials': true,\n            'Access-Control-Allow-Origins': 'http://localhost:8888',\n            'Access-Control-Allow-Headers': 'Accept',\n        },\n    }).then(function(response){\n        window.location.replace(response.data.urlbase +\n            querystring.stringify({\n                response_type: response.data.response_type,\n                client_id: response.data.client_id,\n                scope: response.data.scope,\n                redirect_uri: response.data.redirect_uri,\n                state: response.data.state,\n            })\n        )\n    });\n}\n\nasync function getMyPlaylistId() {\n    const playlist_name = \"⏱ My amazing timer !! ⏱️\";\n\n    const myPlaylists = await axios({\n        method:'get',\n        url:`https://api.spotify.com/v1/users/${user_id}/playlists`,\n        headers: {\n            'Authorization': 'Bearer ' + access_token,\n            'Content-Type': 'application/json',\n        },\n    });\n\n    const myPlaylist = myPlaylists.data.items.find(playlist => playlist.name === playlist_name);\n    if (myPlaylist) {\n        await axios({\n            method:'delete',\n            url:`https://api.spotify.com/v1/playlists/${myPlaylist.id}/followers`,\n            headers: {\n                'Authorization': 'Bearer ' + access_token,\n                'Content-Type': 'application/json',\n            },\n        });\n    }\n\n    const myNewPlaylist = await axios({\n        method:'post',\n        url:`https://api.spotify.com/v1/users/${user_id}/playlists`,\n        headers: {\n            'Authorization': 'Bearer ' + access_token,\n            'Content-Type': 'application/json',\n        },\n        data: {\n            name: playlist_name,\n        },\n    });\n\n    let imgBase64 = await fetch(\"http://localhost:3000/img.jpeg\") // Image URL\n    .then(a => a.blob())\n    .then(blob => new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onerror = reject;\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n    }));\n\n    imgBase64 = imgBase64.replace(\"data:image/jpeg;base64,\", \"\");\n\n    await axios({\n        method:'put',\n        url:`https://api.spotify.com/v1/playlists/${myNewPlaylist.data.id}/images`,\n        headers: {\n            'Authorization': 'Bearer ' + access_token,\n            'Content-Type': 'image/jpeg',\n        },\n        data: imgBase64,\n    });\n\n    return myNewPlaylist.data.id\n}\n\nfunction fillPlaylist(playlist_id, playlist_tracks) {\n    const listURIs = playlist_tracks.reduce((acc, cur) => acc + cur.uri.toString() + ',', '').slice(0, -1);\n    //console.log(listURIs);\n\n    axios({\n        method:'post',\n        url:`https://api.spotify.com/v1/playlists/${playlist_id}/tracks?uris=${listURIs}`,\n        headers: {\n            'Authorization': 'Bearer ' + access_token,\n            'Content-Type': 'application/json',\n        },\n    });\n}\n\nfunction getFeaturedPlaylistsIds() {\n    let date = new Date();\n    date = date.toISOString();\n\n    return axios({\n        method:'get',\n        url:`https://api.spotify.com/v1/browse/featured-playlists`,\n        headers: {\n            'Authorization': 'Bearer ' + access_token\n        },\n        params: {\n            country: user_country,\n            locale: \"en_US\",\n            timestamp: date,\n        },\n    }).then(function(response){\n        return response.data.playlists.items.map(function (playlist) {\n          return playlist.id\n        });\n    });\n}\n\nfunction getUserPlaylistsIds() {\n    return axios({\n        method:'get',\n        url:`https://api.spotify.com/v1/me/playlists`,\n        headers: {\n            'Authorization': 'Bearer ' + access_token\n        },\n    }).then(function(response){\n        return response.data.items.map(function (playlist) {\n          return playlist.id\n        });\n    });\n}\n\nfunction getCategoryPlaylistsIds(category_id) {\n    return axios({\n        method:'get',\n        url:`https://api.spotify.com/v1/browse/categories/${category_id}/playlists`,\n        headers: {\n            'Authorization': 'Bearer ' + access_token\n        },\n        params: {\n            country: user_country,\n        },\n    }).then(function(response){\n        return response.data.playlists.items.map(function (playlist) {\n          return playlist.id\n        });\n    });\n}\n\nfunction getTracksInfo(playlist_id) {\n    let date = new Date();\n    date = date.toISOString();\n\n    return axios({\n        method:'get',\n        url:`https://api.spotify.com/v1/playlists/${playlist_id}/tracks`,\n        headers: {\n            'Authorization': 'Bearer ' + access_token\n        },\n        params: {\n            market: user_country,\n            fields: \"items(track(uri, duration_ms))\",\n            timestamp: date,\n        },\n    }).then(function(response) {\n        const tracks = response.data.items;\n         return tracks.filter(trackObj => trackObj.track).map(function(trackObj) {\n             return {uri: trackObj.track.uri, duration_s: Math.round(trackObj.track.duration_ms/1000)};\n         });\n    });\n}\n\nfunction filterTracks(allTracksInfo, max_dur) {\n    let tot_dur = 0;\n    let playlist_tracks = [];\n\n    allTracksInfo = shuffle(allTracksInfo);\n\n    allTracksInfo.forEach((trackInfo) => {\n        if(trackInfo.duration_s <= max_dur - tot_dur - 150 - 6) {\n            tot_dur = tot_dur + trackInfo.duration_s;\n            playlist_tracks = playlist_tracks.concat(trackInfo);\n        }\n    });\n\n    allTracksInfo = allTracksInfo.filter(item => !playlist_tracks.includes(item));\n\n    allTracksInfo.forEach((trackInfo) => {\n        if(trackInfo.duration_s === max_dur - tot_dur - 6) {\n            tot_dur = tot_dur + trackInfo.duration_s;\n            playlist_tracks = playlist_tracks.concat(trackInfo);\n        }\n    });\n\n    playlist_tracks = playlist_tracks.concat({uri:\"spotify:track:4J1UCLk38GysU2ZGpgQwCw\", duration_s:3});\n    playlist_tracks = playlist_tracks.concat({uri:\"spotify:track:4J1UCLk38GysU2ZGpgQwCw\", duration_s:3});\n\n    console.log(tot_dur);\n\n    return playlist_tracks;\n}\n\nexport async function getTimerPlaylist(max_dur, styleMusic) {\n    const myPlaylist_id = await getMyPlaylistId();\n    let Playlists_ids;\n    //console.log(myPlaylist_id);\n\n    switch(styleMusic) {\n        case \"From featured playlists\":\n            Playlists_ids = await getFeaturedPlaylistsIds();\n            break;\n        case \"From your playlists\":\n            Playlists_ids = await getUserPlaylistsIds();\n            break;\n        case \"Pop\":\n            Playlists_ids = await getCategoryPlaylistsIds('pop');\n            break;\n        case \"K-pop\":\n            Playlists_ids = await getCategoryPlaylistsIds('kpop');\n            break;\n        case \"Rock\":\n            Playlists_ids = await getCategoryPlaylistsIds('rock');\n            break;\n        default:\n            Playlists_ids = await getFeaturedPlaylistsIds();\n    }\n\n    //console.log(featuredPlaylists_ids);\n\n    const PR_allTracksInfo = Playlists_ids.map((idPlaylist) => getTracksInfo(idPlaylist));\n    let allTracksInfo = await Promise.all(PR_allTracksInfo);\n    allTracksInfo = allTracksInfo.flat();\n    //console.log(allTracksInfo);\n\n    const playlist_tracks = filterTracks(allTracksInfo, max_dur);\n\n    fillPlaylist(myPlaylist_id, playlist_tracks);\n}","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Home.js",["69","70"],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Loggedin.js",["71"],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/util.js",[],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/User.js",[],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Navbar.js",[],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/NumberInputFieldTimer.js",["72"],"import React from 'react';\nimport {Box, NumberInputField} from \"@chakra-ui/react\";\n\nexport class NumberInputFieldTimer extends React.Component {\n    render(){\n        return(\n            <NumberInputField\n                height=\"8rem\"\n                width=\"6rem\"\n                m=\"1rem\"\n                textAlign=\"center\"\n                fontWeight=\"bold\"\n                fontSize=\"6em\"\n                color=\"white\"\n                textShadow=\"3px 3px 8px rgba(0,0,0,0.3)\"\n\n                bg=\"rgba(255,255,255,0.08)\"\n                borderWidth=\"0\"\n                shadow=\"6px 6px 8px rgba(0,0,0,0.2), inset 2px 2px 15px rgba(255,255,255,0.08)\"\n\n\n                _focus={{\n                    shadow: \"8px 8px 6px rgba(255,255,255,0.01), inset 6px 6px 8px rgba(0,0,0,0.35)\",\n                }}\n                _active={{\n                    color: \"rgba(255,255,255,0.5)\",\n                    fontWeight: \"bold\",\n                    bgGradient:\"linear(to-t,rgba(29,185,84,0),rgba(29,185,84,0))\",\n                }}\n            />\n        );\n    };\n\n}","/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/TimerInput.js",[],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Layout.js",["73","74","75"],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/RadioCard.js",[],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/ListStyles.js",["76"],"/Users/clairelaverne/Documents/Projects/WEB/musical_timer/src/Summary.js",[],{"ruleId":"77","replacedBy":"78"},{"ruleId":"79","replacedBy":"80"},{"ruleId":"81","severity":1,"message":"82","line":7,"column":7,"nodeType":"83","messageId":"84","endLine":7,"endColumn":20},{"ruleId":"81","severity":1,"message":"85","line":16,"column":5,"nodeType":"83","messageId":"84","endLine":16,"endColumn":18},{"ruleId":"81","severity":1,"message":"86","line":4,"column":10,"nodeType":"83","messageId":"84","endLine":4,"endColumn":13},{"ruleId":"81","severity":1,"message":"87","line":4,"column":15,"nodeType":"83","messageId":"84","endLine":4,"endColumn":21},{"ruleId":"81","severity":1,"message":"88","line":3,"column":10,"nodeType":"83","messageId":"84","endLine":3,"endColumn":25},{"ruleId":"81","severity":1,"message":"86","line":2,"column":9,"nodeType":"83","messageId":"84","endLine":2,"endColumn":12},{"ruleId":"81","severity":1,"message":"89","line":3,"column":14,"nodeType":"83","messageId":"84","endLine":3,"endColumn":20},{"ruleId":"81","severity":1,"message":"90","line":3,"column":30,"nodeType":"83","messageId":"84","endLine":3,"endColumn":36},{"ruleId":"81","severity":1,"message":"91","line":4,"column":9,"nodeType":"83","messageId":"84","endLine":4,"endColumn":19},{"ruleId":"81","severity":1,"message":"87","line":2,"column":15,"nodeType":"83","messageId":"84","endLine":2,"endColumn":21},"no-native-reassign",["92"],"no-negated-in-lhs",["93"],"no-unused-vars","'imageToBase64' is assigned a value but never used.","Identifier","unusedVar","'refresh_token' is assigned a value but never used.","'Box' is defined but never used.","'Center' is defined but never used.","'FontAwesomeIcon' is defined but never used.","'Button' is defined but never used.","'VStack' is defined but never used.","'TimerInput' is defined but never used.","no-global-assign","no-unsafe-negation"]